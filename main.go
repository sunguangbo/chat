package main

import (
	"chat/dal"
	"chat/service"
	"fmt"
	"github.com/gin-gonic/gin"
	"github.com/redis/go-redis/v9"
)

func main() {
	//xmlStr := "<xml>\n  <ToUserName><![CDATA[toUser]]></ToUserName>\n  <FromUserName><![CDATA[fromUser]]></FromUserName>\n  <CreateTime>1348831860</CreateTime>\n  <MsgType><![CDATA[text]]></MsgType>\n  <Content><![CDATA[this is a test]]></Content>\n  <MsgId>1234567890123456</MsgId>\n  <MsgDataId>xxxx</MsgDataId>\n  <Idx>xxxx</Idx>\n</xml>"

	//str := "{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"role\":\"assistant\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当\",\"delta\":\"当\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"当\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然\",\"delta\":\"然\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"然\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以\",\"delta\":\"可以\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"可以\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，\",\"delta\":\"，\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"，\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您\",\"delta\":\"您\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"您\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要\",\"delta\":\"需要\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"需要\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什\",\"delta\":\"什\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"什\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么\",\"delta\":\"么\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"么\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样\",\"delta\":\"样\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"样\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的\",\"delta\":\"的\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"的\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码\",\"delta\":\"代码\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"代码\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢\",\"delta\":\"呢\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"呢\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？\",\"delta\":\"？\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"？\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请\",\"delta\":\"请\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"请\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提\",\"delta\":\"提\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"提\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供\",\"delta\":\"供\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"供\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更\",\"delta\":\"更\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"更\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具\",\"delta\":\"具\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"具\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体\",\"delta\":\"体\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"体\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的\",\"delta\":\"的\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"的\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细\",\"delta\":\"细\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"细\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节\",\"delta\":\"节\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"节\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，\",\"delta\":\"，\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"，\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如\",\"delta\":\"例如\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"例如\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语\",\"delta\":\"语\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"语\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言\",\"delta\":\"言\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"言\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、\",\"delta\":\"、\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"、\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题\",\"delta\":\"问题\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"问题\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述\",\"delta\":\"描述\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"描述\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、\",\"delta\":\"、\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"、\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入\",\"delta\":\"输入\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"输入\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出\",\"delta\":\"输出\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"输出\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等\",\"delta\":\"等\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"等\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。\",\"delta\":\"。\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"。\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我\",\"delta\":\"我\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"我\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将\",\"delta\":\"将\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"将\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽\",\"delta\":\"尽\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"尽\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力\",\"delta\":\"力\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"力\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为\",\"delta\":\"为\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"为\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为您\",\"delta\":\"您\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"您\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为您提\",\"delta\":\"提\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"提\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为您提供\",\"delta\":\"供\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"供\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为您提供帮\",\"delta\":\"帮\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"帮\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为您提供帮助\",\"delta\":\"助\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"助\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为您提供帮助。\",\"delta\":\"。\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{\"content\":\"。\"},\"index\":0,\"finish_reason\":null}]}}\n{\"role\":\"assistant\",\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"parentMessageId\":\"f849a74e-d71f-4271-9e7c-dc289181bfd7\",\"text\":\"当然可以，您需要什么样的代码呢？请提供更具体的细节，例如语言、问题描述、输入输出等。我将尽力为您提供帮助。\",\"detail\":{\"id\":\"chatcmpl-70kLYdco5pdda878kTQ1ederR61wl\",\"object\":\"chat.completion.chunk\",\"created\":1680412512,\"model\":\"gpt-3.5-turbo-0301\",\"choices\":[{\"delta\":{},\"index\":0,\"finish_reason\":\"stop\"}]}}"
	//str := RequestChat("你觉得谁是世界上最漂亮的女人", "123")
	//s := strings.Split(str, "\n")
	//fmt.Println(s[len(s)-1])

	//dd := service.TextResMSG{
	//	ToUserName:   service.CDATA{"aaa"},
	//	FromUserName: service.CDATA{"bbb"},
	//	CreateTime:   0,
	//	MsgType:      service.CDATA{"text"},
	//	Content:      service.CDATA{"123"},
	//}
	//b, _ := xml.Marshal(dd)
	//
	//fmt.Println(string(b))

	g := gin.Default()
	g.GET("", service.GetSendMsgHandler)
	g.POST("", service.PostSendMsgHandler)
	err := g.Run(":80")

	if err != nil {
		fmt.Println("gin err:", err)
	}

}

func init() {
	InitRedis()
}

func InitRedis() {
	dal.Redis = redis.NewClient(&redis.Options{
		Addr: "124.221.171.25:6379",
	})
}
